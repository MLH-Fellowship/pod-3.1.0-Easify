<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>MorphCast SDK - Demo with graphical elements</title>
    <style>

        #start_over span {
            position: absolute;
            font-size: 20px;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            color: white;
            display: block;
            height: 20px;
            margin: auto;
            text-align: center;
        }

        #myProgress {
            width: 50%;
            background-color: gray;
        }

  
    </style>
    <!-- configuration for the Alert plugin -->
    <meta name="mphtools-feature" content="compatibilityUI, cameraPrivacyPopup, compatibilityAutoCheck">
</head>

<body>
    <!-- include automatic alerts about browser and App compatibility -->
    <script src="https://sdk.morphcast.com/mphtools/v1.0/mphtools.js"></script>
    <!-- include MorphCast SDK -->
    <script src="https://ai-sdk.morphcast.com/v1.14/ai-sdk.js"></script>

    <!-- elements of the page -->
    <div><b>Results</b></div>
    <div id="age">Likely Age: -</div>
    <div id="gender">Likely Gender: -</div>
    <div id="emotion">Dominant Emotion: -</div>

    <script>
        // Complete code documentation of MorphCast AI SDK, here:
        // https://ai-sdk.morphcast.com/latest/index.html

        const initSDK = new Promise((res) => {
            res(CY.loader()
                .licenseKey("b71ba1d527c3f71b2b23f4dbc8a0297fad2ca1e8f6c6")
                .addModule(CY.modules().FACE_AGE.name)
                .addModule(CY.modules().FACE_GENDER.name)
                .addModule(CY.modules().FACE_EMOTION.name)
                .addModule(CY.modules().FACE_ATTENTION.name)
                .load());
        });

        /*
        Event listeners for MorphCast SDK output
         */

        window.addEventListener(CY.modules().FACE_AGE.eventName, (evt) => {
            age_div.innerHTML = 'Likely Age: ' + evt.detail.output.numericAge + ' years';
        });

        window.addEventListener(CY.modules().FACE_GENDER.eventName, (evt) => {
            gen_div.innerHTML = 'Likely Gender: ' + evt.detail.output.mostConfident;
        });

        window.addEventListener(CY.modules().FACE_EMOTION.eventName, (evt) => {
            emo_div.innerHTML = 'Dominant Emotion: ' + evt.detail.output.dominantEmotion;
        });

        window.addEventListener(CY.modules().FACE_ATTENTION.eventName, (evt) => {
            const attention = evt.detail.output.attention;
            console.log((attention * 100).toFixed(2))
        });

        const startButton = document.querySelector("#start_over");

        initSDK.then(({ start }) => start())


        const age_div = document.querySelector("#age");
        const gen_div = document.querySelector("#gender");
        const emo_div = document.querySelector("#emotion");

    </script>
</body>

</html>